@import "tailwindcss";
@source "../mdx-components.tsx";

@layer utilities {
    .font-thin {
        font-variation-settings:
            "wght" 100,
            var(--sans-variation);
    }
    .font-extralight {
        font-variation-settings:
            "wght" 200,
            var(--sans-variation);
    }
    .font-light {
        font-variation-settings:
            "wght" 300,
            var(--sans-variation);
    }
    .font-normal {
        font-variation-settings:
            "wght" 440,
            var(--sans-variation);
    }
    .font-medium {
        font-variation-settings:
            "wght" 500,
            var(--sans-variation);
    }
    .font-semibold {
        font-variation-settings:
            "wght" 600,
            var(--sans-variation);
    }
    .font-bold {
        font-variation-settings:
            "wght" 640,
            var(--sans-variation);
    }
    .font-extrabold {
        font-variation-settings:
            "wght" 700,
            var(--sans-variation);
    }
    .font-black {
        font-variation-settings:
            "wght" 800,
            var(--sans-variation);
    }
}

@theme {
    --color-rurikon-50: #ebedef;
    --color-rurikon-100: #d8dbdf;
    --color-rurikon-200: #b3b9c1;
    --color-rurikon-300: #8c95a1;
    --color-rurikon-400: #697381;
    --color-rurikon-500: #4a515b;
    --color-rurikon-600: #3b4149;
    --color-rurikon-700: #2b3035;
    --color-rurikon-800: #1e2125;
    --color-rurikon-900: #0e0f11;
    --color-rurikon-950: #07080a;

    --color-rurikon-border: #d8dbdfb3;

    --font-sans:
        var(--sans), -apple-system, ui-sans-serif, system-ui, sans-serif,
        "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
        "Noto Color Emoji";
    --font-serif:
        var(--serif), ui-serif, Georgia, Cambria, "Times New Roman", Times,
        serif;
    --font-mono:
        var(--mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;

    --breakpoint-text: 1220px;
    --breakpoint-mobile: 420px;
}

:root {
    --background: #fcfcfc;
    --sans-variation: "opsz" 32;
    --font-features:
        "cpsp" 1, "cv01", "cv03", "cv04", "calt", "ss03", "liga", "ordn";
}

body {
    font-synthesis: none;
    font-family:
        var(--sans),
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        Oxygen,
        Ubuntu,
        Cantarell,
        "Open Sans",
        "Helvetica Neue",
        sans-serif;
    font-feature-settings: var(--font-features);
    font-variation-settings:
        "wght" 440,
        var(--sans-variation);
    font-variant: common-ligatures contextual;
    text-decoration-skip-ink: auto;
    text-spacing-trim: space-first;
    font-optical-sizing: auto;
    letter-spacing: 0.0085em;
    word-spacing: -0.04em;
    background-color: var(--background);
    text-rendering: geometricPrecision;

    /* Debugger */
    /* background: linear-gradient(to bottom, #ccc, var(--background) 1px);
  background-size: 100% 1.75rem; */
}

i,
em,
blockquote,
.sidenote {
    font-family:
        var(--serif), Baskerville, Georgia, Cambria, "Times New Roman", Times,
        serif;
    font-style: initial;
    font-optical-sizing: auto;
    font-variation-settings:
        "wght" 480,
        var(--sans-variation);
    font-weight: 400;
    font-variant-ligatures: contextual;
    letter-spacing: -0.006em;
}

nav {
    font-family:
        var(--mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
}

del {
    text-decoration-thickness: 1px;
}

blockquote {
    box-shadow: 1px 0 0 var(--color-rurikon-500) inset;
}
@media screen and (max-width: 420px) {
    blockquote {
        /* Make it wider on mobile with a lighter color */
        box-shadow: 2px 0 0 var(--color-rurikon-300) inset;
    }
}

blockquote + blockquote {
    display: flow-root;
}

main {
    hanging-punctuation: first allow-end last;
    hyphens: auto;
    hyphenate-limit-chars: 10 6 6;
}

pre {
    background-color: #f0f0f0;
    contain: paint;
    overflow-x: auto;
    padding: 0.875rem 1.25rem;
    -webkit-font-smoothing: auto;
    --shiki-foreground: #414141;
    --shiki-background: transparent;
}

pre code {
    display: inline-block;
    padding: 0;
    line-height: 1.45rem;
}

code {
    font-family:
        var(--mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
    word-spacing: -0.15em;
    background-color: #f0f0f0;
    padding: 0.2em 0.2em;

    /* color: hsl(215deg 32% 37%); */
    --shiki-token-comment: hsl(215deg 32% 37% / 45%);
    --shiki-token-punctuation: hsl(215deg 32% 37% / 65%);
    --shiki-token-keyword: hsl(215deg 32% 37% / 85%);
    --shiki-token-function: hsl(223deg 85% 46%);
    --shiki-token-string: #0fb359;
    --shiki-token-string-expression: #0fb359;
    --shiki-token-constant: hsl(215deg 32% 26%);
    --shiki-token-link: #0fb359;
    --shiki-token-parameter: #ff9800;
}

code span {
    transition: color 0.2s;
}

article {
    figure {
        margin-top: 1.75rem;
        line-height: 0;
    }
    .sidenote-content {
        img,
        video,
        pre {
            margin: 0;
        }
    }
    .no-padding {
        --frame-padding: 0;
    }
    .framed > img,
    .framed > figure > span:first-child {
        padding: var(--frame-padding, 0.875rem);
        background: var(--frame-background, #fff);
        border: 1px solid var(--color-rurikon-border);
    }
    iframe {
        width: 100%;
        border: 1px solid var(--color-rurikon-border);
        background-color: #fff;
    }
    details {
        margin-top: 1.75rem;
        padding: 0.5rem 0;
        border-top: 1px solid var(--color-rurikon-border);
        border-bottom: 1px solid var(--color-rurikon-border);
    }
    details summary {
        font-variation-settings:
            "wght" 600,
            var(--sans-variation);
        margin-bottom: 0.25rem;
    }
    details summary::marker {
        content: "";
    }
    details p:first-of-type {
        margin-top: 0;
    }
}

.content-fade-out {
    background: linear-gradient(
        180deg,
        hsla(0, 0%, 100%, 1) 0%,
        hsla(0, 0%, 100%, 0.63) 14%,
        hsla(0, 0%, 100%, 0.36) 29%,
        hsla(0, 0%, 100%, 0.19) 43%,
        hsla(0, 0%, 100%, 0.08) 57%,
        hsla(0, 0%, 100%, 0.02) 71%,
        hsla(0, 0%, 100%, 0) 86%,
        hsla(0, 0%, 100%, 0) 100%
    );
}

*::selection {
    background: #95a5ac40;
    color: #485a74;
}

.dot-leaders {
    text-align: end;
    height: 1em;
    overflow: hidden;
    word-wrap: break-word;
    letter-spacing: 6px;
}

.dot-leaders::after {
    content: "······································································";
}

@supports (view-transition-name: none) {
    @media not (prefers-reduced-motion: reduce) {
        ::view-transition-old(crossfade) {
            animation: hide 0.4s cubic-bezier(0.6, 0, 0.8, 1) forwards;
        }

        ::view-transition-new(crossfade) {
            opacity: 0;
            animation: appear 0.6s ease 0.2s forwards;
        }
    }
}

@keyframes hide {
    0% {
        opacity: 1;
        filter: blur(0);
    }
    100% {
        opacity: 0;
        filter: blur(4px);
    }
}

@keyframes appear {
    0% {
        opacity: 0;
        filter: blur(4px);
    }
    100% {
        opacity: 1;
        filter: blur(0);
    }
}

/* Adapt to your needs */
.react-activity-calendar__tooltip {
    width: max-content;
    max-width: calc(100vw - 20px);
    padding: 0.2em 0.5em;
    border-radius: 0.25em;
    background-color: hsl(0 0% 10%);
    color: hsl(0 0% 94%);
    font-size: 13px;

    /* See the `withArrow` setting. */
    .react-activity-calendar__tooltip-arrow {
        fill: hsl(0 0% 10%);
    }

    /* Use this instead of a media query - the component theme can be set */
    /* independent of the system color scheme. */
    &[data-color-scheme="dark"] {
        background-color: hsl(0 0% 94%);
        color: hsl(0 0% 6%);

        .react-activity-calendar__tooltip-arrow {
            fill: hsl(0 0% 94%);
        }
    }
}

/* Polaroid styles for timeline */
.polaroid-container {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
}

.polaroid-frame {
    max-width: 280px;
    width: 100%;
    position: relative;
    box-shadow:
        0 4px 8px rgba(0, 0, 0, 0.1),
        0 8px 16px rgba(0, 0, 0, 0.1),
        0 12px 24px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.polaroid-frame:hover {
    transform: rotate(0deg) scale(1.02);
    box-shadow:
        0 6px 12px rgba(0, 0, 0, 0.15),
        0 12px 24px rgba(0, 0, 0, 0.15),
        0 18px 36px rgba(0, 0, 0, 0.15);
}

.polaroid-frame::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 20px;
    background: linear-gradient(145deg, #ffffff, #f0f0f0);
    border-radius: 50%;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}
